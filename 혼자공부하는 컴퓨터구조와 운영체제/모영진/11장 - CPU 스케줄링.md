# CPU 스케줄링

## CPU 스케줄링 개요

- 운영체제가 프로세스들에게 공정하고 합리적으로 CPU 자원을 배분하는 것
- 프로세스 종류
  - **입출력 집중 프로세스 (I/O bound process)**
    - 실행 상태보다는 입출력을 위한 대기 상태에 더 많이 머무름
    - I/O burst가 많은 프로세스
  - **CPU 집중 프로세스 (CPU bound process)**
    - 대기 상태보다는 실행 상태에 더 많이 머무른다.
    - CPI burst가 많은 프로세스
- CPU 작업 종류
  - **CPU 버스트 (CPU burst)**
    - CPU를 이용하는 작업.
  - **입출력 버스트 (I/O burst)**
    - 입출력 장치를 기다리는 작업
- 스케줄링 큐 (Scheduling Queue)
  - 메모리에 적재하고 싶은 프로세스들, 특정 입출력장치를 사용하고 싶은 프로세스들을 모두 줄 세워 관리.
  - **준비 큐 (ready queue)**
    - CPU를 이용하고 싶은 프로세스들이 서는 줄
  - 대기 큐 (waiting queue)
    - 입출력장치를 이용하기 위해 잠시 대기 상태에 접어든 프로세스들이 서는 중
- 스케줄링 우선순위
  - **선점형 스케줄링 (preemptive scheduling)**
    - 프로세스가 CPU 자원을 사용하더라도 운영체제가 프로세스로부터 자원을 강제로 빼앗아 다른 프로세스에 할당할 수 있는 스케줄링
    - 대부분의 운영체제는 선점형 스케줄링을 차용
    - 유연하게 프로세스의 자원을 관리할 수 있지만, 컨텍스트 스위칭이 자주 발생하는 과정에서 오버헤드가 발생할 수 있다.
  - **비선점형 스케줄링 (non-preemptive scheduling)**
    - 하나의 프로세스가 자원을 사용한다면 그 프로세스가 종료되거나 스스로 대기 상태에 접어들기 전까지 다른 프로세스가 끼어들 수 없는 스케줄링
    - 오버헤드는 적게 발생하지만, 하나의 프로세스가 끝날때까지 기다려야하므로 효율적으로 자원을 사용하지 못한다는 단점이 있음.

<br>

## CPU 스케줄링 알고리즘

- **호위 효과 (Convoy effect)**
  - 먼저 준비 큐(ready queue)에 도착한 프로세스를 기다리느라 금방 끝나는 프로세스가 오랜 시간을 기다려야 하는 현상
- **선입 선처리 스케줄링 (= FCFS Scheduling, First Come First Served Scheduling)**
  - 준비 큐에 삽입된 순서대로 프로세스들을 처리하는 비선점형 스케줄링
  - CPU를 먼저 요청한 프로세스부터 CPU를 할당하는 스케줄링
  - 때때로 프로세스들이 기다리는 시간이 매우 길어질수 있다는 단점이 있다. (CPU를 오래 사용하는 프로세스가 먼저 준비 큐(ready queue)에 도착한 경우, 다른 프로세스들은 그 프로세스가 끝날때까지 기다리는 수밖에 없음.)
- **최단 작업 우선 스케줄링 (= SJF Scheduling, Shortest Job first Scheduling)**
  - 준비 큐에 삽입된 프로세스들중 CPU 이용시간의 길이가 짧은 프로세스부터 실행하는 스케줄링
- **라운드 로빈 스케줄링**
  - 선입 선처리 스케줄링 (FCFS Scheduling)에 타임 슬라이스(CPU를 사용할 수 있는 시간)라는 개념이 더해진 스케줄링
  - 정해진 시간(타임 슬라이스)만큼의 시간동안 돌아가며 CPU를 이용하는 선점형 스케줄링
- **최소 잔여 시간 우선 스케줄링 (Shortest Remaining Time Scheduling)**
  - 최단 작업 우선 스케줄링 (SJF Scheduling)에 로빈 알고리즘을 합친 스케줄링
  - 최소 잔여 시간 우선 스케줄링하에서 프로세스들은 정해진 타임 슬라이스만큼 CPU를 사용하되, CPU를 사용할 다음 프로세스로는 남아있는 작업 시간이 가장 적은 프로세스를 선택
- **우선 순위 스케줄링 (Priority Scheduling)**
  - 프로세스들에 우선순위를 부여하고, 가장 높은 우선순위를 가진 프로세스부터 실행하는 스케줄링 알고리즘
  - 우선 순위가 같으면, 선입 선처리로 스케줄링
- **기아 현상 (Starvation)**
  - 우선 순위 스케줄링에서 우선 순위가 낮은 프로세스의 실행이 계속 뒤로 밀리는 것
- **에이징 (Aging)**
  - 오랫동안 대기한 프로세스의 우선 순위를 점차 높히는 방식
  - 에이징을 적용하면 우선 순위가 낮아 마냥 기다리기만 하는 프로세스를 없앨 수 있음 (기아 현상 방지)
- **다단계 큐 스케줄링 (Multi-level queue Scheduling)**
  -  우선 순위별로 준비 큐를 여러 개 사용하는 스케줄링 방식
  - 우선 순위가 높은 Queue의 프로세스들을 먼저 처리하는 방식 
- **다단계 피드백 큐 스케줄링**
  - 우선 순위대로만 프로세스를 처리하는 다단계 큐 스케줄링은 기아 현상(Starvation)이 발생할 수 있음.
  - 프로세스들이 큐 사이를 이동할 수 있도록 하는 다단계 큐 스케줄링을 보완한 스케줄링
  - CPU를 오래 사용해야하는 프로세스는 점차 우선순위가 낮아진다.

<br>