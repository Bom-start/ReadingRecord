# <a name="spring"></a>8장. 스프링이란 무엇인가?

### 스프링의 정의

- 애플리케이션 프레임워크
   - 특정 계층이나 기술, 업무 분야에 국한되지 않고 애플리케이션의 전 영역을 포괄하는 범용적인 프레임워크
   - 빠르고 편리하며 효율적으로 진행하는데 일차적인 목표를 두는 프레임워크이다.
- 경량급(Lightweight)
   - EJB는 느리고 무거운 자바 서버(WAS)와 다루기 힘든 난해한 설정파일 구조와 불편한 서버 배치(deploy)등으로 인한 부담 때문에 고가의 제품으로 구성된 개발환경을 갖추지 않고는 개발하기 어려웠다.
   - 스프링은 단순한 서버환경인 톰캣, 제티에서도 완벽하게 동작하며 단순한 개발툴과 기본적인 개발환경으로도 엔터프라이즈 개발에서 필요로 하는 주요한 기능을 갖춘 애플리케이션을 개발하기에 충분하다.
- 자바 엔터프라이즈 개발을 편하게
   - 스프링은 애플리케이션의 핵심인 사용자의 요구사항, 비즈니스 로직을 빠르고 효과적으로 구현하며
- 오픈소스
   - 스프링을 기반으로 커스텀한 프레임워크를 만들 수 있다.

### POJO 프로그래밍

POJO(Plain Of Java Object)는 자바의 단순한 오브젝트를 사용하는 방식을 의미한다. 

POJO의 조건은 다음과 같다.

- 특정 규약에 종속되지 않는다.
- 특정 환경에 종속되지 않는다.
   - POJO 프로그래밍의 장점은 특정 환경에 종속되지 않으므로 테스트에 유리하다는 특징이 있다. 

POJO 프로그래밍은 <u>비즈니스 로직의 복잡함과 엔터프라이즈 기술의 복잡함을 서로 분리</u>하는 것이 핵심이다. 

<mark>기술과 비즈니스 로직을 분리하고, POJO 방식의 애플리케이션 개발을 가능하게 한다는 스프링의 목적을 쉽게 이루려면 스프링과 같은 POJO 프레임워크가 필요</mark>하다. 스프링에서 이 POJO 프로그래밍을 손쉽게하도록 지원하는 세가지 기술이 <b>IoC/DI, AOP, PSA</b>이다.

### 스프링의 기술

스프링에서 POJO 프로그래밍을 지원하는 세 가지 기술이 있다.

- **IoC / DI**
   - DI 활용 방법
      - 의존 대상의 구현 변경
      - 오브젝트의 핵심 기능 자체를 변경
      - 부가기능 추가 (데코레이터 패턴)
      - 인터페이스 변경
      - 프록시
      - 템플릿과 콜백
      - 싱글톤과 오브젝트 스코프
      - 테스트
- **AOP**
   - 적용 기법
      - 다이내믹 프록시 사용
      - AspectJ 라이브러리 사용
   - 적용 순서 (AOP 사용순서라기 보다 AOP를 프로젝트에 적용하는 순서)
      - 먼저 단순히 스프링이 제공하는 AOP 이용(ex. 트랜잭션)
      - AOP 담당자 관리하에 정책적인 AOP 적용(여기부터 advanced)
         - 비즈니스 로직을 가진 오브젝트에 대한 보안
         - 특정 계층의 오브젝트 이용 전후의 작업 기록을 남기는 로깅
         - 데이터 추적을 위한 트레이닝
         - 특정 구간의 실시간 성능 모니터링
      - AOP의 자유로운 이용
- **PSA (Portable Service Abstraction)**
   - PSA는 환경과 세부 기술의 변화에 관계없이 일관된 방식으로 기술에 접근할 수 있게 해주는 기술
   - 스프링은 JavaEE를 기본 플랫폼으로 하는 자바 엔터프라이즈 개발에 주로 사용된다. 따라서 다양한 JavaEE 기술에 의존적일 수 밖에 없다.이 때 POJO코드가 다른 환경에 종속되는 경우에 노출되어서는 안된다. 이를 가능케하는 기술이 PSA. 

위의 세가지 개념은 서로 독립적인 개념이라기 보다는 자바 오브젝트를 직접 의존하는대신 POJO를 유지하면서 OOP를 구현할 수 있는 서로 밀접한 관계의 개념이다.

<br>

## <a name="spring-starter"></a>스프링 프로젝트 시작하기

## 자바 엔터프라이즈 플랫폼과 스프링 애플리케이션

### 클라이언트와 백엔드 시스템

많이 사용되는 구조는 클라이언트가 브라우저이고, 백엔드가 DB인 구성이다.

### 애플리케이션 서버

스프링으로 만든 애플리케이션을 자바 서버환경에 배포하려면, JavaEE 표준을 따르는 애플리케이션 서버는 크게 두가지로 구분된다. 하나는 다양한 형태의 모듈로 배포가 가능한 완전한 애플리케이션 서버(WAS)이고, 다른 하나는 웹 모듈의 배포만 가능한 경량급 WAS 또는 서블릿/JSP 컨테이너이다.

### WAS

고가의 WAS를 사용하면 크리티컬한 시스템에서 요구하는 고도의 안정성이나 고성능 시스템에서 필수적인 리소스 관리, 레거시 시스템의 연동이나 기존 EJB로 개발된 모듈을 함께 사용하는등의 필요가 있다면 상용 또는 오픈소스 WAS를 이용할 수 있다.

WAS는 상대적으로 관리 기능이나 모니터링 기능이 뛰어나서 여러 대의 서버를 동시에 운영할 때 유리한 점이 많다.

> **WAS와 웹서버의 차이**
>
> 아파치 웹 서버는 HTTP 웹 서버이다. HTTP 요청(GET, POST, PUT, DELETE)을 처리할 수 있는 웹 서버이다.
>
> 톰캣은 대표적인 WAS중 하나이다. 웹서버와 웹 컨테이너의 결합으로 다양한 기능을 컨테이너에 구현하여 다양한 역할을 수행할 수 있는 서버를 말한다.
>
> 클라이언트의 요청이 있을때 내부의 프로그램을 통해 결과를 만들어내고 이것을 다시 클라이언트에 잔달해주는 역할을 하는 것이 바로 웹 컨테이너이다. 
>
> 웹 서버는 정적인 데이터(리소스)를 처리하는 역할을 수행하고, 웹 컨테이너는 동적인 데이터(리소스)를 처리하는 역할을 수행한다. 

![이미지출처 : http://gap85.tistory.com/45](http://cfile24.uf.tistory.com/image/156A50404F93CDE817331E)

### 독립 웹 모듈

WAR로 패키징된 독립 웹 모듈로 배포된다. 톰캣 같은 서블릿 컨테이너를 쓴다면 독립 웹 모듈이 유일한 방법이다. WAS로 배포한다고 하더라도 독립 웹 모듈을 사용하는 경우가 대부분일 것이다. EJB 모듈을 함께 사용하거나 여러 개의 웹 모듈을 묶는 애플리케이션 모듈을 만들지 않는한 독립 웹 모듈이 가장 편리한 배포 단위이다.

### 엔터프라이즈 애플리케이션

확장자가 EAR인 엔터프라이즈 애플리케이션으로 패키징해서 배포할 수 있다.

### 백그라운드 서비스 모듈

이 두가지 방법 외에 RAR 패키징 방법이 있다. RAR는 리소스 커넥터를 만들어 배포할 때 사용하는 방식인데 만약 스프링으로 만든 애플리케이션이 UI를 가질 필요없고, 서버 내에서 백그라운드 서비스처럼 동작할 필요가 있다.

