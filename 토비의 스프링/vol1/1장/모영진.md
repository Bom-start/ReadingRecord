# 1장. 오브젝트와 의존관계

## 오브젝트

스프링을 이해하기 위해서는 애플리케이션에서 오브젝트가 생성되고 다른 오브젝트와 관계를 맺고, 사용되어 지고, 소멸되기까지의 전 과정을 생각할 수 있어야 한다. 

이 과정을 통해 오브젝트를 어떻게 잘 설계할 수 있는가로 발전하게 되고, 객체지향의 기초와 원칙을 기반으로 다양한 목적을 위해 재활용 가능한 설계 방법인 **디자인 패턴**, 더 깔끔한 구조로 개선해나가는 작업인 **리팩토링**, 의도한대로 잘 작동하는지 검증하기 위한 **단위 테스트**와 같이 오브젝트 설계와 구현에 관한 여러 응용 기술과 지식으로 연결된다.

### 자바 빈

다음 두가지 관례를 따라 만들어진 오브젝트.

- 디폴트 생성자
   - 자바 빈은 파라미터가 없는 디폴트 생성자를 갖고있어야 한다. 툴이나 프레임워크에서 리플렉션을 이용해 오브젝트를 생성하기 때문에 필요하다.
- 프로퍼티
   - 자바빈이 노출하는 이름을 가진 속성을 프로퍼티라고 한다. 프로퍼티는 set으로 시작하는 수정자 메서드(setter)와 get으로 시작하는 접근자 메서드(getter)를 이용해 수정 또는 조회할 수 있다.

<br>

## DAO 분리

### 관심사의 분리

1. DB 연결을 위한 `Connection`을 어떻게 가져올까라는 관심
2. 사용자 등록을 위해 DB에 보낼 SQL 문장을 담을 `Statement`를 만들고 실행하는 것. 파라미터로 넘어온 사용자 정보를 `Statement`에 바인딩시키고, `Statement`에 담긴 SQL을 DB를 통해 실행시키는 것.
3. 작업이 끝나면 사용한 리소스인 `Statement`와 `Connection` 오브젝트를 닫아줘서 소중한 공유

### 리팩토링

기존의 코드를 외부의 동작방식의 변화없이 내주 구조를 변경해서 재구성하는 작업 또는 기술을 말한다. 리팩토링을 하면, 코드 내부의 설계가 개선되어 코드를 이해하기가 더 편해지고 변화에 효율적으로 대응할 수 있다.

### 디자인패턴

디자인패턴은 소프트웨어 설계시 특정 상황에서 자주 만나는 문제를 해결하기 위해 사용할 수 있는 재사용 가능한 솔루션.

디자인패턴은 주로 객체지향적인 설계가 많다. 그러다보니 디자인패턴의 설계 구조가 서로 비슷한데, 이는 객체지향적 설계로부터 문제를 해결하기 위해 적용할 수 있는 확장성 추구 방법이 대부분 두 가지 구조로 정리되기 때문.

- 클래스 상속
- 오브젝트 합성

백엔드 개발자라면 디자인 패턴에 대해 학습을 해야 하며, [GoF의 다지인 패턴](http://aladin.kr/p/S6Nzq) 또는 [Head First Design Pattern](http://aladin.kr/p/7FHKt)를 추천.

-  #### 템플릿 메서드 패턴
   -  **상속**을 통해서 슈퍼클래스의 기능을 확장할때 사용하는 대표적인 디자인 패턴.

   -  **<u>변하지 않는 기능은 슈퍼클래스에 만들어두고, 가변적인 기능은 서브클래스</u>**에서 만든다. 

   -  슈퍼클래스에서는 추상 메서드나 오버라이드 가능한 메서드를 정의하여 이를 활용해 코드의 알고리즘을 담는 템플릿 메서드를 만든다.

   -  슈퍼클래스에서 디폴트 기능을 정의해두거나 비워뒀다가 서브클래스에서 선택적으로 오버라이드 할 수 있도록 만든 메서드를 훅(Hook) 메서드라고 한다.

   -  ~~~java
      public abstract class Super {
         public void templateMethod(){
            hookMethod();
            abstractMethod();
         }
      
         protected void hookMethod(){
            System.out.println("선택적으로 오버라이딩 가능");
         }
      
         protected abstract void abstractMethod();  // 오버라이딩을 강제하는 메서드(추상 메서드)
      }
      ~~~

   -  ~~~java
      public class Sub1 extends Super {
         protected void hookMethod(){
      
         }
      
         @Override
         protected void abstractMethod() {
      
         }
      }
      ~~~

- #### 팩토리 메서드 패턴

-  팩토리 메서드 패턴도 상속을 통해 기능 확장하는 패턴.

-  슈퍼클래스에서는 어떤 클래스의 오브젝트를 만들어 반환할지 관심을 갖지않는다. 덕분에 서브클래스에서는 다양한 방법으로 오브젝트를 생성하는 메서드를 재정의할 수 있다.

-  서브클래스에서 오브젝트 생성 방법과 클래스를 결정할수있도록 미리 정의해둔 메서드를 팩토리 메서드라고 한다.

-  오브젝트를 생성하는 기능을 갖는 메서드를 팩토리 메서드라고 표현하는데, 이 때의 팩토리 메서드와 팩토리 메서드 패턴에서 팩토리 메서드는 서로 다르다. 주의 할 것!
