# Chapter3 - 템플릿

## 템플릿/콜백 패턴
전략 패턴의 기본 구조에서 전략의 구현을 익명 내부 클래스를 활용한다.

- 템플릿
  고정된(변경이 없는)코드를 템플릿의 형태로 슈퍼클래스에 두고, 바뀌는 부분을 서브클래스의 메소드에 두는 구조
- 콜백
  실행되는 것을 목적으로 다른 오브젝트의 메소드에 전달되는 **오브젝트**를 말한다.
  파라미터로 전달되지만 값을 참조하기 위한 것이 아니라 특정 로직을 담은 메소드를 실행하기 위해서 전달된다.
  
### 동작원리
고정되어 반복되는 코드를 분리해서 재사용하고, 템플릿 사이사이 변하는 부분만 콜백으로 처리한다.

> **콜백의 특징❗** 
> 
> 콜백은 단일 메소드만 가지는 인터페이스를 사용한다.  
> 하나의 템플릿 내에서 여러가지의 전략이 필요한 특별한 경우를 제외하고는 대부분의 콜백이 템플릿의 작업 흐름 중에 한번 호출되는 경우가 많기 때문이다.  
> 콜백 인터페이스의 메소드의 파라미터를 통해서 템플릿의 작업 흐름 중에 만들어진 컨텍스트를 전달 받을 수 있다.

### 반복되는 코드를 분리하는 과정
고정된 형태의 작업이 여러곳에서 반복된다면, 중복되는 부분만 분리해야 한다.

1. 중복되는 코드를 메소드로 분리해 본다.
2. 분리된 코드에서 일부분만 변경이 되어 사용되어야 한다면 변경되는 부분을 전략패턴을 적용하고, DI로 의존관계를 맺는다. (개방-페쇄 원칙)
3. 바뀌는 부분이 한 애플리케이션 안에서 동시에 여러 종류가 자주 만들어 진다면 템플릿/콜백 패턴을 적용하는 것을 고려한다.

### JdbcTemplate
스프링에서 제공하는 JDBC 코드용 기본 템플릿이다. 탬플릿/패턴을 사용해서 다양한 템플릿과 콜백을 제공한다.


## Tips
1. 세 번이상 반복되는 코드가 있다면 리팩토링을 생각해 봐야한다.
2. 자기가 개발한 코드에 좀 부정적인 자세를 가질 필요가 있다.
